<div class="pull-right">
  {{#if (eq mode "view")}}
    {{#bs-button type="default" size="sm" onClick=(action "edit")}}{{tt this "edit"}}{{/bs-button}}
  {{else}}
    {{#bs-button type="default" size="sm" onClick=(action "cancel")}}{{tt this "cancel"}}{{/bs-button}}
    {{#one-spin-button class="btn btn-primary btn-sm" disabled=(not isValid) action=(action "save")}}
      {{tt this "save"}}  
    {{/one-spin-button}}
  {{/if}}
</div>
{{#promise-proxy-container proxy=manifestProxy}}
  <h1>{{tt this "indicesHeader"}}</h1>
  {{#promise-proxy-container proxy=harvesterIndicesProxy}}
    {{#basic-table class="table table-striped indices-table"}}
      <thead>
        <tr>
          <th>{{tt this "pluginIndex"}}</th>
          <th class="index-info">{{tt this "harvesterIndex"}}</th>
        </tr>
      </thead>
      <tbody>
        {{#each guiPluginIndices as |guiPluginIndex|}}
          <tr>
            <td class="row-header">{{guiPluginIndex.name}}</td>
            <td class="index-info">
              <div>
                {{#if (eq mode "edit")}}
                  {{#bs-form class="row form-horizontal without-labels" as |bsForm|}}
                    {{#power-select
                      tagName="div"
                      class="col-xs-12 col-sm-6"
                      options=assignIndexMethods
                      selected=(get selectedAssignMethods guiPluginIndex.name)
                      onchange=(action "changeAssignMethod" guiPluginIndex.name)
                      searchEnabled=false
                      renderInPlace=true
                      as |assignMethod|}}
                      {{tt this (concat "assignMethods." assignMethod)}}
                    {{/power-select}}
                    {{#bsForm.group
                      class=(concat-classes "col-xs-12 col-sm-6" (if (not-eq (get selectedAssignMethods guiPluginIndex.name) "create") "dropdown-input"))
                      validation=(if (get guiIndicesErrors guiPluginIndex.name) "error" "success")}}
                      {{#if (eq (get selectedAssignMethods guiPluginIndex.name) "create")}}
                        <input
                          value={{get createIndicesNames guiPluginIndex.name}}
                          oninput={{action (action "changeAssignValue" guiPluginIndex.name) value="target.value"}}
                          class="form-control">
                      {{else if (eq (get selectedAssignMethods guiPluginIndex.name) "reuse")}}
                        {{#power-select
                          tagName="div"
                          options=harvesterIndicesProxy
                          selected=(get selectedIndices guiPluginIndex.name)
                          onchange=(action "changeAssignValue" guiPluginIndex.name)
                          searchEnabled=false
                          renderInPlace=true
                          as |index|}}
                          {{index.name}}
                        {{/power-select}}
                      {{/if}}
                      <div class="form-message">{{get guiIndicesErrors guiPluginIndex.name}}</div>
                    {{/bsForm.group}}
                    {{!-- {{#unless (eq (get selectedAssignMethods guiPluginIndex.name) "unassigned")}}
                      {{get guiIndicesErrors guiPluginIndex.name}}
                    {{/unless}} --}}
                  {{/bs-form}}
                {{else}}
                  {{#if (get indicesMapping guiPluginIndex.name)}}
                    {{#truncated-string class="assigned-index-name"}}{{get (get indicesMapping guiPluginIndex.name) "name"}}{{/truncated-string}}
                  {{else}}
                    <span class="not-assigned">{{tt this "notAssigned"}}</span>
                  {{/if}}
                {{/if}}
              </div>
            </td>
          </tr>
        {{/each}}
      </tbody>
    {{/basic-table}}
  {{/promise-proxy-container}}
{{/promise-proxy-container}}
{{!-- <div class="form-group">
  <label for={{concat elementId "-configuration"}}>{{tt this "configuration"}}</label>
  {{json-editor
    inputId=(concat elementId "-configuration")
    value=dataToDisplay.configuration
    disabled=disabled
    readonly=(eq mode "view")
    onChange=(action "onConfigurationChange")}}
</div> --}}
