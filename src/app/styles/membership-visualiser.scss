.membership-visualiser {
  $line-dot-size: 6px;
  $row-height: $line-height-computed + 2 * $padding-large-vertical;
  $animation-time: 0.1s;

  position: relative;
  min-height: 100px;

  &.loading {
    pointer-events: none;
    .membership {
      opacity: 0.3
    }
  }

  &.condensed {
    .membership-relation {
      width: 30px;
    }
    .membership-block {
      max-width: 120px;
      .type-icon {
        pointer-events: none;
      }
    }
    .membership-element {
      pointer-events: none;
    }
  }

  .membership-element {
    display: inline-block;
    vertical-align: middle;
    line-height: $row-height;
  }
  .membership-block {
    position: relative;
    padding-left: 3.2em;
    max-width: 250px;
    .type-icon {
      @include vertical-align-middle();
      position: absolute;
      left: $padding-xs-horizontal;
      font-size: 2.2em;
    }
    .record-name {
      margin-right: 0.8em;
    }
    .type-icon {
      &::before {
        transition: opacity $animation-time linear;
        opacity: 1;
      }
      &::after {
        content: $oneicon-settings;
        position: absolute;
        left: 0;
        transition: opacity $animation-time linear;
        opacity: 0;
      }
    }
    &.group .type-icon {
      color: $color-one-yellow;
    }
    &.space .type-icon {
      color: $color-one-azure;
    }
    &.provider .type-icon {
      color: $color-one-mint;
    }
    .type-icon:hover, &.actions-opened .type-icon {
      cursor: pointer;
      &::after {
        opacity: 1;
      }
      &::before {
        opacity: 0;
      }
    }
    .link-icon {
      @include vertical-align-middle();
      position: absolute;
      right: $padding-xs-horizontal;
      font-size: 1em;
      color: $color-one-azure;
    }
  }
  .membership-relation {
    position: relative;
    width: 100px;
    height: 2 * $line-dot-size;
    .line, .dot {
      position: absolute;
      left: 0;
      transition: background-color $animation-time linear;
      background-color: $color-one-azure;
    }
    .line {
      @include vertical-align-middle();
      height: 2px;
      width: 100%;
    }
    .dot {
      top: 50%;
      transform: translateX(-50%) translateY(-50%);
      width: $line-dot-size;
      height: $line-dot-size;
      border-radius: 100%;
    }
    .dot-right {
      left: initial;
      right: 0;
      transform: translateX(50%) translateY(-50%);
    }
    .relation-sign {
      position: absolute;
      bottom: 50%;
      right: -2px;
      width: 8px;
      height: 8px;
      border-color: $color-one-azure;
      border-style: solid;
      border-width: 0 2px 2px 0;
      transform-origin: right bottom;
      transform: rotate(-45deg);
      transition: border-color $animation-time linear;
    }
    &.hovered {
      .line, .dot {
        background-color: $color-one-blue-gray;
      }
      .relation-sign {
        border-color: $color-one-blue-gray;
      }
      .actions-trigger {
        opacity: 1;
      }
      .relation-description {
        margin-top: -5px;
        opacity: 1;
      }
    }

    .actions-trigger {
      $trigger-size: 22px;
      @include absolute-align-middle-center();
      position: absolute;
      left: 50%;
      color: $color-one-blue-gray;
      font-size: $trigger-size;
      opacity: 0;
      transition: opacity $animation-time linear;
      cursor: pointer;
      &:hover {
        color: $color-one-azure;
      }
      &::after {
        content: '';
        @include absolute-align-middle-center();
        display: block;
        width: $trigger-size * 0.9;
        height: $trigger-size * 0.9;
        background-color: $color-one-white;
        border-radius: 100%;
        z-index: -1;
      }
    }
    .relation-description {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%) translateY(-1em);
      margin-top: 0;
      opacity: 0;
      transition: margin-top $animation-time linear, opacity $animation-time linear;
      font-size: 0.8em;
      font-weight: bold;
      color: $color-one-azure;
    }
  }
  .membership-more {
    font-style: italic;
    margin: 0 0.8em;
  }
  .membership {
    position: relative;
    min-height: $row-height;
    border-bottom: 1px solid $main-border-color;
    &:last-child {
      border-bottom: 0;
    }
    &.filtered-out {
      opacity: 0.5;
    }
    &.limit-info {
      padding-left: 1em;
      font-style: italic;
    }
    .ps-container {
      white-space: nowrap;
      position: relative;
      &.ps-active-x {
        cursor: move;
      }
      & > .ps-scrollbar-x-rail {
        z-index: 1;
      }
    }
    .ps-container.ps-active-x + .bar-nav {
      display: block;
    }
    .bar-nav {
      display: none;
    }
    .scroll-button {
      position: absolute;
      top: 0;
      height: $row-height;
      width: 40px;
      font-size: 1.5em;
      .one-icon {
        @include absolute-align-middle-center();
      }
    }
    .scroll-left {
      padding-right: 8px;
      background-image: linear-gradient(to right, rgba(255, 255, 255, 0.9) 80%, transparent);
      left: 0;
      .one-icon {
        margin-left: -4px;
      }
    }
    .scroll-right {
      padding-left: 8px;
      background-image: linear-gradient(to left, rgba(255, 255, 255, 0.9) 80%, transparent);
      right: 0;
      .one-icon {
        margin-left: 4px;
      }
    }
    .description {
      padding: 0 $padding-small-horizontal $padding-large-vertical $padding-small-horizontal;
      color: lighten($main-text-color, 20%);
      font-size: 0.8em;
    }
    &.with-description {
      .relation-description {
        opacity: 1;
      }
    }
  }
}
